<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>D3 Page Template</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <style>
      div.bar {
        display: inline-block;
        width: 20px;
        height: 75px;
        background-color: teal;
        margin-right: 2px;
      }

      .axis path,
      .axis line {
        stroke: black;
        shape-rendering: crispEdges;
      }

      .axis text {
        font-family: Optima, Futura, sans-serif;
        font-weight: bold;
        font-size: 14px;
        fill: black;
      }
      li {
        margin-right: 10px;
      }
    </style>
  </head>
  <body>
    <h2>Marcos Pereira - HW4</h2>
    <ul style="display: flex; list-style: none">
      <li>Graphs:</li>
      <li><a href="index.html">Chart 1</a></li>
      <li><a href="Chapter10.html">Chart 2</a></li>
      <li><a href="custom.html">Chart 3</a></li>
    </ul>
    <!-- <div class="bar"></div> -->

    <script type="text/javascript">
      // d3.select("body").append("p").text("New paragraph!");

      // var dataset = [
      //   5, 10, 13, 19, 21, 25, 22, 18, 15, 13, 11, 12, 15, 20, 18, 17, 16, 18,
      //   23, 25,
      // ];

      // d3.select("body")
      //   .selectAll("div")
      //   .data(dataset)
      //   .enter()
      //   .append("div")
      //   .attr("class", "bar")
      //   .style("height", function (d) {
      //     var barHeight = d * 5;
      //     return barHeight + "px";
      //   });

      // CH 5.
      //   d3.select("body")
      //     .selectAll("p")
      //     .data(dataset)
      //     .enter()
      //     .append("p")
      //     .text(function (d) {
      //       return "I can count up to " + d;
      //     })
      //     .style("color", function (d) {
      //       if (d > 15) {
      //         //threshold of 15
      //         return "red";
      //       } else {
      //         return "black";
      //       }
      //     });

      // width and height
      // var w = 500;
      // var h = 50;
      // var svg = d3
      //   .select("body")
      //   .append("svg")
      //   .attr("width", w)
      //   .attr("height", h);

      // var dataset = [5, 10, 15, 20, 25];
      // var circles = svg
      //   .selectAll("circle")
      //   .data(dataset)
      //   .enter()
      //   .append("circle");

      // circles
      //   .attr("cx", function (d, i) {
      //     return i * 50 + 25;
      //   })
      //   .attr("cy", h / 2)
      //   .attr("r", function (d) {
      //     return d;
      //   })
      //   .attr("fill", "yellow")
      //   .attr("stroke", "orange")
      //   .attr("stroke-width", function (d) {
      //     return d / 2;
      //   });

      //The New Chart
      // var w = 500;
      // var h = 300;
      // var barPadding = 1;

      // var svg = d3
      //   .select("body")
      //   .append("svg")
      //   .attr("width", w)
      //   .attr("height", h);

      // svg
      //   .selectAll("rect")
      //   .data(dataset)
      //   .enter()
      //   .append("rect")
      //   .attr("x", function (d, i) {
      //     return i * 21; //Bar width of 20 plus 1 for padding
      //   })
      //   .attr("y", function (d) {
      //     return h - d;
      //   })
      //   .attr("width", w / dataset.length - barPadding)
      //   .attr("height", function (d) {
      //     return d; // Just the data value
      //   })
      //   .attr("fill", function (d) {
      //     return "rgb(0,0, " + Math.round(d * 10) + ")";
      //   });

      //Labels
      // svg
      //   .selectAll("text")
      //   .data(dataset)
      //   .enter()
      //   .append("text")
      //   .text(function (d) {
      //     return d;
      //   })
      //   .attr("x", function (d, i) {
      //     return i * (w / dataset.length) + 5;
      //   })
      //   .attr("y", function (d) {
      //     return h - d * 4 + 15;
      //   })
      //   .attr("font-family", "sans-serif")
      //   .attr("font-size", "11px")
      //   .attr("fill", "white");

      // //Making a scatterplot
      // var dataset = [
      //   [5, 20],
      //   [480, 90],
      //   [250, 50],
      //   [100, 33],
      //   [330, 95],
      //   [410, 12],
      //   [475, 44],
      //   [25, 67],
      //   [85, 21],
      //   [220, 88],
      //   [600, 150],
      // ];

      // DYNAMIC, RANDOM DATASET
      // var dataset = [];
      // var numDataPoints = 50;
      // var xRange = Math.random() * 1000;
      // var yRange = Math.random() * 1000;
      // for (var i = 0; i < numDataPoints; i++) {
      //   var newNumber1 = Math.floor(Math.random() * xRange);
      //   var newNumber2 = Math.floor(Math.random() * yRange);
      //   dataset.push([newNumber1, newNumber2]);
      // }
      // //Create SVG element
      // // var svg = d3
      // //   .select("body")
      // //   .append("svg")
      // //   .attr("width", w)
      // //   .attr("height", h);

      // var padding = 40;
      // var xScale = d3
      //   .scaleLinear()
      //   .domain([
      //     0,
      //     d3.max(dataset, function (d) {
      //       return d[0];
      //     }),
      //   ])
      //   .range([padding, w - padding * 2]);

      // var yScale = d3
      //   .scaleLinear()
      //   .domain([
      //     0,
      //     d3.max(dataset, function (d) {
      //       return d[1];
      //     }),
      //   ])
      //   .range([h - padding, padding]);

      // var rScale = d3
      //   .scaleLinear()
      //   .domain([
      //     0,
      //     d3.max(dataset, function (d) {
      //       return d[1];
      //     }),
      //   ])
      //   .range([2, 5]);

      // var aScale = d3
      //   .scaleSqrt()
      //   .domain([
      //     0,
      //     d3.max(dataset, function (d) {
      //       return d[1];
      //     }),
      //   ])
      //   .range([0, 10]);

      // svg
      //   .selectAll("circle") // <-- No longer "rect"
      //   .data(dataset)
      //   .enter()
      //   .append("circle")
      //   .attr("cx", function (d) {
      //     return xScale(d[0]);
      //   })
      //   .attr("cy", function (d) {
      //     return yScale(d[1]);
      //   })
      //   .attr("r", function (d) {
      //     return aScale(d[1]);
      //   });

      //Scatter Labels
      // svg
      //   .selectAll("text") // <-- Note "text", not "circle" or "rect"
      //   .data(dataset)
      //   .enter()
      //   .append("text")
      //   .text(function (d) {
      //     return d[0] + "," + d[1];
      //   })
      //   .attr("x", function (d) {
      //     return xScale(d[0]);
      //   })
      //   .attr("y", function (d) {
      //     return yScale(d[1]);
      //   })
      //   .attr("font-family", "sans-serif")
      //   .attr("font-size", "11px")
      //   .attr("fill", "red");

      // CHAPTER 7 - Scales
      // var dataset = [100, 200, 300, 400, 500];

      // var scale = d3.scaleLinear().domain([100, 500]).range([10, 350]);

      // d3.max(dataset, function (d) {
      //   return d[0];
      // });

      // var simpleDataset = [7, 8, 4, 5, 2];
      // d3.max(simpleDataset);

      // Chapter 8 - Axes
      // var xAxis = d3.axisBottom().scale(xScale).tickValues([0, 100, 250, 600]);

      // //Positioning Axes
      // svg
      //   .append("g")
      //   .attr("class", "axis")
      //   .attr("transform", "translate(0, " + (h - padding) + ")")
      //   .call(xAxis);

      // //Define Y axis
      // var yAxis = d3.axisLeft().scale(yScale).ticks(5);

      // svg
      //   .append("g")
      //   .attr("class", "axis")
      //   .attr("transform", "translate(" + padding + ",0)")
      //   .call(yAxis);

      // var formatAsPercentage = d3.format(".1%");
      // xAxis.tickFormat(formatAsPercentage);

      // CHAPTER 9 - Updates, Transitions, and Motion

      //Width and height
      // var w = 600;
      // var h = 250;

      // var dataset = [
      //   { key: 0, value: 5 }, //dataset is now an array of objects.
      //   { key: 1, value: 10 }, //Each object has a 'key' and a 'value'.
      //   { key: 2, value: 13 },
      //   { key: 3, value: 19 },
      //   { key: 4, value: 21 },
      //   { key: 5, value: 25 },
      //   { key: 6, value: 22 },
      //   { key: 7, value: 18 },
      //   { key: 8, value: 15 },
      //   { key: 9, value: 13 },
      //   { key: 10, value: 11 },
      //   { key: 11, value: 12 },
      //   { key: 12, value: 15 },
      //   { key: 13, value: 20 },
      //   { key: 14, value: 18 },
      //   { key: 15, value: 17 },
      //   { key: 16, value: 16 },
      //   { key: 17, value: 18 },
      //   { key: 18, value: 23 },
      //   { key: 19, value: 25 },
      // ];

      // var xScale = d3
      //   .scaleBand()
      //   .domain(d3.range(dataset.length))
      //   .rangeRound([0, w])
      //   .paddingInner(0.05);

      // var yScale = d3
      //   .scaleLinear()
      //   .domain([
      //     0,
      //     d3.max(dataset, function (d) {
      //       return d.value;
      //     }),
      //   ])
      //   .range([0, h]);

      // //Define key function, to be used when binding data
      // var key = function (d) {
      //   return d.key;
      // };

      // //Create SVG element
      // var svg = d3
      //   .select("body")
      //   .append("svg")
      //   .attr("width", w)
      //   .attr("height", h);

      // //Create bars
      // svg
      //   .selectAll("rect")
      //   .data(dataset, key)
      //   .enter()
      //   .append("rect")
      //   .attr("x", function (d, i) {
      //     return xScale(i);
      //   })
      //   .attr("y", function (d) {
      //     return h - yScale(d.value);
      //   })
      //   .attr("width", xScale.bandwidth())
      //   .attr("height", function (d) {
      //     return yScale(d.value);
      //   })
      //   .attr("fill", function (d) {
      //     return "rgb(0, 0, " + d.value * 10 + ")";
      //   });

      // //Create labels
      // svg
      //   .selectAll("text")
      //   .data(dataset, key)
      //   .enter()
      //   .append("text")
      //   .text(function (d) {
      //     return d.value;
      //   })
      //   .attr("text-anchor", "middle")
      //   .attr("x", function (d, i) {
      //     return xScale(i) + xScale.bandwidth() / 2;
      //   })
      //   .attr("y", function (d) {
      //     return h - yScale(d.value) + 14;
      //   })
      //   .attr("font-family", "sans-serif")
      //   .attr("font-size", "11px")
      //   .attr("fill", "white");

      // //On click, update with new data
      // d3.selectAll("p").on("click", function () {
      //   //See which p was clicked
      //   var paragraphID = d3.select(this).attr("id");

      //   //Decide what to do next
      //   if (paragraphID == "add") {
      //     //Add a data value
      //     var minValue = 2;
      //     var maxValue = 25 - minValue;
      //     var newNumber = Math.floor(Math.random() * maxValue) + minValue;
      //     var lastKeyValue = dataset[dataset.length - 1].key;
      //     dataset.push({
      //       key: lastKeyValue + 1,
      //       value: newNumber,
      //     });
      //   } else {
      //     //Remove a value
      //     dataset.shift(); //Remove one value from dataset
      //   }

      //   //Update scale domains
      //   xScale.domain(d3.range(dataset.length));
      //   yScale.domain([
      //     0,
      //     d3.max(dataset, function (d) {
      //       return d.value;
      //     }),
      //   ]);

      //   //Select…
      //   var bars = svg.selectAll("rect").data(dataset, key);

      //   //Enter…
      //   bars
      //     .enter()
      //     .append("rect")
      //     .attr("x", w)
      //     .attr("y", function (d) {
      //       return h - yScale(d.value);
      //     })
      //     .attr("width", xScale.bandwidth())
      //     .attr("height", function (d) {
      //       return yScale(d.value);
      //     })
      //     .attr("fill", function (d) {
      //       return "rgb(0, 0, " + d.value * 10 + ")";
      //     })
      //     .merge(bars) //Update…
      //     .transition()
      //     .duration(500)
      //     .attr("x", function (d, i) {
      //       return xScale(i);
      //     })
      //     .attr("y", function (d) {
      //       return h - yScale(d.value);
      //     })
      //     .attr("width", xScale.bandwidth())
      //     .attr("height", function (d) {
      //       return yScale(d.value);
      //     });

      //   //Exit…
      //   bars
      //     .exit()
      //     .transition()
      //     .duration(500)
      //     .attr("x", -xScale.bandwidth())
      //     .remove();

      //   //Update all labels

      //   //Select…
      //   var labels = svg.selectAll("text").data(dataset, key);

      //   //Exit…
      //   labels
      //     .exit()
      //     .transition()
      //     .duration(500)
      //     .attr("x", -xScale.bandwidth())
      //     .remove();

      //   //Enter…
      //   labels
      //     .enter()
      //     .append("text")
      //     .text(function (d) {
      //       return d.value;
      //     })
      //     .attr("text-anchor", "middle")
      //     .attr("x", w)
      //     .attr("y", function (d) {
      //       return h - yScale(d.value) + 14;
      //     })
      //     .attr("font-family", "sans-serif")
      //     .attr("font-size", "11px")
      //     .attr("fill", "white")
      //     .merge(labels) //Update…
      //     .transition()
      //     .duration(500)
      //     .attr("x", function (d, i) {
      //       return xScale(i) + xScale.bandwidth() / 2;
      //     });
      // });
      //Width and height
      var w = 500;
      var h = 300;
      var padding = 40;

      /*
			//Static dataset
			var dataset = [
							[5, 20], [480, 90], [250, 50], [100, 33], [330, 95],
							[410, 12], [475, 44], [25, 67], [85, 21], [220, 88],
							[600, 150]
						  ];
			*/

      //Dynamic, random dataset
      var dataset = []; //Initialize empty array
      var numDataPoints = 20; //Number of dummy data points to create
      var xRange = Math.random() * 1000; //Max range of new x values
      var yRange = Math.random() * 1000; //Max range of new y values
      for (var i = 0; i < numDataPoints; i++) {
        //Loop numDataPoints times
        var newNumber1 = Math.floor(Math.random() * xRange); //New random integer
        var newNumber2 = Math.floor(Math.random() * yRange); //New random integer
        dataset.push([newNumber1, newNumber2]); //Add new number to array
      }

      //Create scale functions
      var xScale = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(dataset, function (d) {
            return d[0];
          }),
        ])
        .range([padding, w - padding * 2]);

      var yScale = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(dataset, function (d) {
            return d[1];
          }),
        ])
        .range([h - padding, padding]);

      var aScale = d3
        .scaleSqrt()
        .domain([
          0,
          d3.max(dataset, function (d) {
            return d[1];
          }),
        ])
        .range([0, 10]);

      //Define X axis
      var xAxis = d3.axisBottom().scale(xScale).ticks(5);

      //Define Y axis
      var yAxis = d3.axisLeft().scale(yScale).ticks(5);

      //Create SVG element
      var svg = d3
        .select("body")
        .append("svg")
        .attr("width", w)
        .attr("height", h);

      //Create circles
      svg
        .selectAll("circle")
        .data(dataset)
        .enter()
        .append("circle")
        .attr("cx", function (d) {
          return xScale(d[0]);
        })
        .attr("cy", function (d) {
          return yScale(d[1]);
        })
        .attr("r", function (d) {
          return aScale(d[1]);
        });

      /*
			//Create labels
			svg.selectAll("text")
			   .data(dataset)
			   .enter()
			   .append("text")
			   .text(function(d) {
			   		return d[0] + "," + d[1];
			   })
			   .attr("x", function(d) {
			   		return xScale(d[0]);
			   })
			   .attr("y", function(d) {
			   		return yScale(d[1]);
			   })
			   .attr("font-family", "sans-serif")
			   .attr("font-size", "11px")
			   .attr("fill", "red");
		  	*/

      //Create X axis
      svg
        .append("g")
        .attr("class", "axis")
        .attr("transform", "translate(0," + (h - padding) + ")")
        .call(xAxis);

      //Create Y axis
      svg
        .append("g")
        .attr("class", "axis")
        .attr("transform", "translate(" + padding + ",0)")
        .call(yAxis);
    </script>
  </body>
</html>
